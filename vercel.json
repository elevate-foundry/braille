{
  "version": 2,
  "name": "bbid-api",
  "builds": [
    { "src": "api/*.js", "use": "@vercel/node" },
    { "src": "**/*.html", "use": "@vercel/static" },
    { "src": "js/**/*.js", "use": "@vercel/static" },
    { "src": "css/**/*.css", "use": "@vercel/static" },
    { "src": "images/**/*", "use": "@vercel/static" }
  ],
  "routes": [
    { "src": "/api/bbid", "dest": "/api/bbid.js" },
    { "src": "/api/convert", "methods": ["POST"], "dest": "/api/convert.js" },
    { "src": "/api/batch-compare", "dest": "/api/batch-compare.js" },
    { "src": "/api/behavioral-fingerprint", "methods": ["POST"], "dest": "/api/behavioral-fingerprint.js" },
    { "src": "/api/log-device", "methods": ["POST"], "dest": "/api/log-device.js" },
    { "src": "/api/count-fingerprints", "dest": "/api/count-fingerprints.js" },
    { "src": "/js/(.*)", "headers": { "cache-control": "public, max-age=0, must-revalidate" }, "dest": "/js/$1" },
    { "src": "/css/(.*)", "headers": { "cache-control": "public, max-age=31536000, immutable" }, "dest": "/css/$1" },
    { "src": "/images/(.*)", "headers": { "cache-control": "public, max-age=31536000, immutable" }, "dest": "/images/$1" },
    { "src": "/", "dest": "/bbid-chatgpt-test.html" },
    { "src": "/(.*)", "dest": "/$1" }
  ],
  "github": {
    "silent": true
  },
  "env": {
    "NODE_ENV": "production",
    "MONGODB_URI": "mongodb+srv://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_CLUSTER}/${MONGODB_DATABASE}?retryWrites=true&w=majority"
  }
}
