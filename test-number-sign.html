<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Sign Test</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            padding: 20px;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .test-button {
            padding: 10px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-button:hover {
            background-color: var(--accent-color);
        }
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Number Sign Display Test</h1>
        <p>This page tests the display of the number sign in braille representation.</p>
        
        <div class="test-buttons">
            <button class="test-button" onclick="testLetter('a')">Test Letter 'A'</button>
            <button class="test-button" onclick="testLetter('1')">Test Number '1'</button>
            <button class="test-button" onclick="testLetter('5')">Test Number '5'</button>
            <button class="test-button" onclick="testLetter('0')">Test Number '0'</button>
            <button class="test-button" onclick="testLetter('12')">Test Number '12'</button>
            <button class="test-button" onclick="testLetter('456')">Test Number '456'</button>
        </div>
        
        <div class="braille-display">
            <div class="braille-cell">
                <div class="dot" id="dot1"></div>
                <div class="dot" id="dot2"></div>
                <div class="dot" id="dot3"></div>
                <div class="dot" id="dot4"></div>
                <div class="dot" id="dot5"></div>
                <div class="dot" id="dot6"></div>
            </div>
            <div class="braille-info">
                <h3 id="current-letter">Select a letter or number</h3>
                <p id="letter-description">Click a button to test</p>
            </div>
            
            <!-- Number sign container (hidden by default, shown for numbers) -->
            <div id="number-sign-container" class="number-sign-container" style="display: none;">
                <p>Number Sign (indicates that the following character is a number):</p>
                <div class="braille-cell number-sign-cell">
                    <div class="dot" id="number-sign-dot1"></div>
                    <div class="dot" id="number-sign-dot2"></div>
                    <div class="dot" id="number-sign-dot3"></div>
                    <div class="dot" id="number-sign-dot4"></div>
                    <div class="dot" id="number-sign-dot5"></div>
                    <div class="dot" id="number-sign-dot6"></div>
                </div>
            </div>
        </div>
        
        <div class="test-results">
            <h3>Test Results</h3>
            <pre id="test-log"></pre>
        </div>
    </div>
    
    <script>
        // Simplified version of the displayBrailleLetter function for testing
        function testLetter(letter) {
            const testLog = document.getElementById('test-log');
            testLog.textContent = `Testing ${letter}...\n`;
            
            // Get braille pattern
            const isMultiDigit = /^[0-9]{2,}$/.test(letter);
            let pattern;
            
            if (isMultiDigit) {
                // For multi-digit numbers, we only display the first digit pattern in this test
                const firstDigit = letter.charAt(0);
                pattern = getBrailleAlphabet()[firstDigit];
                testLog.textContent += `Multi-digit number detected. Using pattern for first digit (${firstDigit}): ${JSON.stringify(pattern)}\n`;
            } else {
                pattern = getBrailleAlphabet()[letter.toLowerCase()];
                testLog.textContent += `Pattern for ${letter}: ${JSON.stringify(pattern)}\n`;
            }
            
            // Update dots
            const dots = [
                document.getElementById('dot1'),
                document.getElementById('dot2'),
                document.getElementById('dot3'),
                document.getElementById('dot4'),
                document.getElementById('dot5'),
                document.getElementById('dot6')
            ];
            
            dots.forEach((dot, index) => {
                if (pattern && pattern[index] === 1) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Update info
            const currentLetter = document.getElementById('current-letter');
            const letterDescription = document.getElementById('letter-description');
            const isNumber = /^[0-9]+$/.test(letter);
            
            if (isNumber) {
                // For numbers, show the number sign prefix
                currentLetter.textContent = `# ${letter}`;
                
                // Different description for single vs multi-digit numbers
                if (letter.length === 1) {
                    letterDescription.textContent = `The number ${letter}. In Braille, numbers use the same patterns as the first 10 letters (a-j) but are preceded by the number sign.`;
                } else {
                    letterDescription.textContent = `The number ${letter}. In Braille, each digit uses the same patterns as the first 10 letters (a-j), with the entire number preceded by the number sign.`;
                }
                
                // If we have a number sign container, show it
                const numberSignContainer = document.getElementById('number-sign-container');
                testLog.textContent += `Number sign container: ${numberSignContainer ? 'Found' : 'Not found'}\n`;
                
                if (numberSignContainer) {
                    // Force display block and ensure it's visible
                    numberSignContainer.style.display = 'block';
                    numberSignContainer.style.visibility = 'visible';
                    numberSignContainer.style.opacity = '1';
                    testLog.textContent += `Number sign container displayed\n`;
                    
                    // If we have a number sign pattern, display it
                    const numberSignPattern = getBrailleAlphabet()['#'];
                    testLog.textContent += `Number sign pattern: ${JSON.stringify(numberSignPattern)}\n`;
                    
                    if (numberSignPattern) {
                        // Make sure we're activating the correct dots for the number sign
                        const dot1 = document.getElementById('number-sign-dot1');
                        const dot2 = document.getElementById('number-sign-dot2');
                        const dot3 = document.getElementById('number-sign-dot3');
                        const dot4 = document.getElementById('number-sign-dot4');
                        const dot5 = document.getElementById('number-sign-dot5');
                        const dot6 = document.getElementById('number-sign-dot6');
                        
                        testLog.textContent += `Number sign dots found: ${dot1 && dot2 && dot3 && dot4 && dot5 && dot6 ? 'Yes' : 'No'}\n`;
                        
                        // Apply the active class to the appropriate dots
                        if (dot1) dot1.classList.remove('active');
                        if (dot2) dot2.classList.remove('active');
                        if (dot3) dot3.classList.add('active');
                        if (dot4) dot4.classList.add('active');
                        if (dot5) dot5.classList.add('active');
                        if (dot6) dot6.classList.add('active');
                        
                        testLog.textContent += `Number sign dots activated: 3, 4, 5, 6\n`;
                    }
                }
            } else {
                // For letters, just show the letter
                currentLetter.textContent = letter.toUpperCase();
                letterDescription.textContent = `The letter ${letter.toUpperCase()}`;
                
                // Hide number sign container if it exists
                const numberSignContainer = document.getElementById('number-sign-container');
                if (numberSignContainer) {
                    numberSignContainer.style.display = 'none';
                    testLog.textContent += `Number sign container hidden\n`;
                }
            }
        }
        
        // Simplified braille alphabet for testing
        function getBrailleAlphabet() {
            return {
                // Letters
                'a': [1, 0, 0, 0, 0, 0],
                'b': [1, 1, 0, 0, 0, 0],
                'c': [1, 0, 0, 1, 0, 0],
                'd': [1, 0, 0, 1, 1, 0],
                'e': [1, 0, 0, 0, 1, 0],
                'f': [1, 1, 0, 1, 0, 0],
                'g': [1, 1, 0, 1, 1, 0],
                'h': [1, 1, 0, 0, 1, 0],
                'i': [0, 1, 0, 1, 0, 0],
                'j': [0, 1, 0, 1, 1, 0],
                'k': [1, 0, 1, 0, 0, 0],
                'l': [1, 1, 1, 0, 0, 0],
                'm': [1, 0, 1, 1, 0, 0],
                'n': [1, 0, 1, 1, 1, 0],
                'o': [1, 0, 1, 0, 1, 0],
                'p': [1, 1, 1, 1, 0, 0],
                'q': [1, 1, 1, 1, 1, 0],
                'r': [1, 1, 1, 0, 1, 0],
                's': [0, 1, 1, 1, 0, 0],
                't': [0, 1, 1, 1, 1, 0],
                'u': [1, 0, 1, 0, 0, 1],
                'v': [1, 1, 1, 0, 0, 1],
                'w': [0, 1, 0, 1, 1, 1],
                'x': [1, 0, 1, 1, 0, 1],
                'y': [1, 0, 1, 1, 1, 1],
                'z': [1, 0, 1, 0, 1, 1],
                
                // Numbers (same patterns as a-j but preceded by # in display)
                '1': [1, 0, 0, 0, 0, 0],
                '2': [1, 1, 0, 0, 0, 0],
                '3': [1, 0, 0, 1, 0, 0],
                '4': [1, 0, 0, 1, 1, 0],
                '5': [1, 0, 0, 0, 1, 0],
                '6': [1, 1, 0, 1, 0, 0],
                '7': [1, 1, 0, 1, 1, 0],
                '8': [1, 1, 0, 0, 1, 0],
                '9': [0, 1, 0, 1, 0, 0],
                '0': [0, 1, 0, 1, 1, 0],
                
                // Number sign (indicates that the following character is a number)
                '#': [0, 0, 1, 1, 1, 1]
            };
        }
    </script>
</body>
</html>
