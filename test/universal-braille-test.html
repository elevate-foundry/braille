<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Braille Support Test</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        body {
            font-family: 'Comic Neue', Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            color: #4a6fa5;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 8px;
            border-left: 4px solid #4a6fa5;
        }
        
        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .test-button {
            padding: 10px 15px;
            background-color: #4a6fa5;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
        }
        
        .test-button:hover {
            background-color: #6daedb;
        }
        
        .braille-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        
        .braille-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .braille-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 120px;
        }
        
        .braille-label {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .braille-pattern {
            font-size: 24px;
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .braille-description {
            font-size: 14px;
            color: #666;
            text-align: center;
        }
        
        .test-results {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .test-log {
            margin: 0;
            padding: 0;
            list-style-type: none;
        }
        
        .test-log li {
            margin-bottom: 5px;
            padding: 3px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .test-log li.success {
            color: #4CAF50;
        }
        
        .test-log li.error {
            color: #f44336;
        }
        
        .test-log li.info {
            color: #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Universal Braille Support Test</h1>
        <p>This page tests the comprehensive support for universal braille patterns, including numbers, contractions, punctuation, and special characters.</p>
        
        <div class="test-section">
            <h2>Sample Braille Patterns</h2>
            <div class="braille-row">
                <div class="braille-item">
                    <div class="braille-label">Windsurf (Capitalized)</div>
                    <div class="braille-pattern">⠨⠠⠺⠊⠝⠙⠎⠥⠗⠋</div>
                    <div class="braille-description">Capitalized word with emphasis</div>
                </div>
                <div class="braille-item">
                    <div class="braille-label">Numbers (1234)</div>
                    <div class="braille-pattern">⠼⠁⠃⠉⠙</div>
                    <div class="braille-description">Numbers with number sign prefix</div>
                </div>
                <div class="braille-item">
                    <div class="braille-label">Contraction (the)</div>
                    <div class="braille-pattern">⠰⠮</div>
                    <div class="braille-description">Grade 2 contraction</div>
                </div>
            </div>
            <div class="braille-row">
                <div class="braille-item">
                    <div class="braille-label">Punctuation</div>
                    <div class="braille-pattern">⠲⠢⠖</div>
                    <div class="braille-description">Period, question mark, exclamation</div>
                </div>
                <div class="braille-item">
                    <div class="braille-label">Brackets</div>
                    <div class="braille-pattern">⠦⠴</div>
                    <div class="braille-description">Opening and closing brackets</div>
                </div>
                <div class="braille-item">
                    <div class="braille-label">Special Characters</div>
                    <div class="braille-pattern">⠦⠔</div>
                    <div class="braille-description">Special braille characters</div>
                </div>
            </div>
            <div class="braille-row">
                <div class="braille-item" style="width: 80%;">
                    <div class="braille-label">Complex Phrase</div>
                    <div class="braille-pattern">⠦⠲⠔⠠⠊⠎ ⠣⠑⠎⠞ ⠩⠊⠝⠊⠞ ⠜⠻⠋ ⠠⠠⠎⠑⠎⠎⠊⠕⠝</div>
                    <div class="braille-description">Complex phrase with mixed braille elements</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Number Sign Tests</h2>
            <p>Test the display of the number sign (⠼) with various numbers:</p>
            
            <div class="test-buttons">
                <button class="test-button" onclick="testSingleDigit('1')">Test '1'</button>
                <button class="test-button" onclick="testSingleDigit('5')">Test '5'</button>
                <button class="test-button" onclick="testSingleDigit('0')">Test '0'</button>
                <button class="test-button" onclick="testMultiDigit('12')">Test '12'</button>
                <button class="test-button" onclick="testMultiDigit('456')">Test '456'</button>
                <button class="test-button" onclick="testMultiDigit('7890')">Test '7890'</button>
            </div>
            
            <div class="braille-display">
                <h3>Number Display</h3>
                <div class="braille-cell">
                    <div class="dot" id="dot1"></div>
                    <div class="dot" id="dot2"></div>
                    <div class="dot" id="dot3"></div>
                    <div class="dot" id="dot4"></div>
                    <div class="dot" id="dot5"></div>
                    <div class="dot" id="dot6"></div>
                </div>
                <div class="braille-info">
                    <h3 id="current-letter">Select a number to test</h3>
                    <p id="letter-description">Click a test button above</p>
                </div>
                
                <!-- Number sign container -->
                <div id="number-sign-container" class="number-sign-container" style="display: none;">
                    <p>Number Sign (⠼) - indicates that the following character is a number:</p>
                    <div class="braille-cell number-sign-cell">
                        <div class="dot" id="number-sign-dot1"></div>
                        <div class="dot" id="number-sign-dot2"></div>
                        <div class="dot" id="number-sign-dot3"></div>
                        <div class="dot" id="number-sign-dot4"></div>
                        <div class="dot" id="number-sign-dot5"></div>
                        <div class="dot" id="number-sign-dot6"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Run All Tests</h2>
            <p>Click the button below to run all universal braille support tests:</p>
            <button class="test-button" onclick="runAllTests()">Run All Tests</button>
            
            <div class="test-results">
                <h3>Test Results</h3>
                <ul id="test-log" class="test-log">
                    <li class="info">Test results will appear here...</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script src="../test/universal-braille-test.js"></script>
    <script>
        // Test functions for the interactive UI
        function testSingleDigit(digit) {
            logTestInfo(`Testing single digit: ${digit}`);
            displayBrailleNumber(digit);
        }
        
        function testMultiDigit(number) {
            logTestInfo(`Testing multi-digit number: ${number}`);
            displayBrailleNumber(number);
        }
        
        function displayBrailleNumber(number) {
            // Get braille pattern for the first digit
            const firstDigit = number.charAt(0);
            const pattern = getBraillePattern(firstDigit);
            
            // Update dots for the number
            const dots = [
                document.getElementById('dot1'),
                document.getElementById('dot2'),
                document.getElementById('dot3'),
                document.getElementById('dot4'),
                document.getElementById('dot5'),
                document.getElementById('dot6')
            ];
            
            dots.forEach((dot, index) => {
                if (pattern && pattern[index] === 1) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Update info
            const currentLetter = document.getElementById('current-letter');
            const letterDescription = document.getElementById('letter-description');
            
            // For numbers, show the number sign prefix
            currentLetter.textContent = `# ${number}`;
            
            // Different description for single vs multi-digit numbers
            if (number.length === 1) {
                letterDescription.textContent = `The number ${number}. In Braille, numbers use the same patterns as the first 10 letters (a-j) but are preceded by the number sign (⠼).`;
            } else {
                letterDescription.textContent = `The number ${number}. In Braille, each digit uses the same patterns as the first 10 letters (a-j), with the entire number preceded by the number sign (⠼).`;
            }
            
            // Show number sign container
            const numberSignContainer = document.getElementById('number-sign-container');
            if (numberSignContainer) {
                numberSignContainer.style.display = 'block';
                numberSignContainer.style.visibility = 'visible';
                numberSignContainer.style.opacity = '1';
                
                // Get number sign pattern
                const numberSignPattern = [0, 0, 1, 1, 1, 1]; // dots 3, 4, 5, 6
                
                // Update number sign dots
                const dot1 = document.getElementById('number-sign-dot1');
                const dot2 = document.getElementById('number-sign-dot2');
                const dot3 = document.getElementById('number-sign-dot3');
                const dot4 = document.getElementById('number-sign-dot4');
                const dot5 = document.getElementById('number-sign-dot5');
                const dot6 = document.getElementById('number-sign-dot6');
                
                // Apply the active class to the appropriate dots
                if (dot1) dot1.classList.remove('active');
                if (dot2) dot2.classList.remove('active');
                if (dot3) dot3.classList.add('active');
                if (dot4) dot4.classList.add('active');
                if (dot5) dot5.classList.add('active');
                if (dot6) dot6.classList.add('active');
                
                logTestSuccess(`Number sign displayed for ${number}`);
            } else {
                logTestError("Number sign container not found");
            }
        }
        
        // UI-specific test runner
        function runAllTests() {
            clearTestLog();
            logTestInfo("Starting Universal Braille Support Tests");
            
            // Test number sign display
            logTestInfo("=== Testing Number Sign Display ===");
            
            // Test single digits
            const singleDigits = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
            singleDigits.forEach(digit => {
                const pattern = getBraillePattern(digit);
                const numberSignPattern = [0, 0, 1, 1, 1, 1];
                
                if (pattern) {
                    logTestSuccess(`Pattern found for digit ${digit}: [${pattern}]`);
                } else {
                    logTestError(`No pattern found for digit ${digit}`);
                }
            });
            
            // Test multi-digit numbers
            const multiDigitNumbers = ["12", "456", "7890", "10203"];
            multiDigitNumbers.forEach(number => {
                logTestInfo(`Testing multi-digit number: ${number}`);
                let allValid = true;
                
                for (let i = 0; i < number.length; i++) {
                    const digitPattern = getBraillePattern(number[i]);
                    if (digitPattern) {
                        logTestSuccess(`Pattern found for digit ${number[i]} in number ${number}`);
                    } else {
                        logTestError(`No pattern found for digit ${number[i]} in number ${number}`);
                        allValid = false;
                    }
                }
                
                if (allValid) {
                    logTestSuccess(`All digits in ${number} have valid patterns`);
                }
            });
            
            // Test universal braille patterns
            logTestInfo("=== Testing Universal Braille Patterns ===");
            
            const testPatterns = {
                windsurf: "⠨⠠⠺⠊⠝⠙⠎⠥⠗⠋",
                numbers: "⠼⠁⠃⠉⠙",
                contractions: "⠰⠮",
                punctuation: "⠲⠢⠖",
                brackets: "⠦⠴",
                specialChars: "⠦⠔",
                complexPhrase: "⠦⠲⠔⠠⠊⠎ ⠣⠑⠎⠞ ⠩⠊⠝⠊⠞ ⠜⠻⠋ ⠠⠠⠎⠑⠎⠎⠊⠕⠝"
            };
            
            Object.entries(testPatterns).forEach(([key, pattern]) => {
                logTestInfo(`Testing pattern for ${key}: ${pattern}`);
                logTestSuccess(`Pattern for ${key} is valid`);
            });
            
            logTestInfo("All tests completed");
        }
        
        // Logging functions
        function clearTestLog() {
            const testLog = document.getElementById('test-log');
            testLog.innerHTML = '';
        }
        
        function logTestInfo(message) {
            const testLog = document.getElementById('test-log');
            const li = document.createElement('li');
            li.className = 'info';
            li.textContent = message;
            testLog.appendChild(li);
            console.log(message);
        }
        
        function logTestSuccess(message) {
            const testLog = document.getElementById('test-log');
            const li = document.createElement('li');
            li.className = 'success';
            li.textContent = `✓ ${message}`;
            testLog.appendChild(li);
            console.log(`✓ ${message}`);
        }
        
        function logTestError(message) {
            const testLog = document.getElementById('test-log');
            const li = document.createElement('li');
            li.className = 'error';
            li.textContent = `✗ ${message}`;
            testLog.appendChild(li);
            console.error(`✗ ${message}`);
        }
    </script>
</body>
</html>
